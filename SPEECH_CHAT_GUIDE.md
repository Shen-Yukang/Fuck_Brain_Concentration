# 语音对话功能使用指南

## 功能概述

Chrome扩展现在支持完整的语音对话功能，让用户可以通过语音与虚拟助手进行自然对话。该功能集成了语音识别、语音合成和智能对话管理。

## 主要特性

### 🎤 语音录入
- **智能语音识别**：支持中文、英文等多种语言
- **实时转录**：显示语音识别的中间结果
- **自动发送**：识别完成后可自动发送消息
- **噪音降噪**：内置噪音过滤功能
- **灵敏度调节**：可调节语音识别的灵敏度

### 🔊 语音播放
- **智能语音合成**：支持ByteDance TTS和Web Speech API
- **自动播放**：助手回复后自动语音播放
- **播放控制**：可调节播放速度和音量
- **中断控制**：新输入时自动中断当前播放

### 💬 连续对话模式
- **语音对话会话**：启用后可进行连续语音对话
- **自动监听**：助手回复完成后自动开始下一轮监听
- **会话管理**：智能管理对话会话状态
- **一键控制**：可随时开始或结束对话模式

## 设置配置

### 语音录入设置
1. **启用语音录入**：开启/关闭语音识别功能
2. **识别语言**：选择语音识别的语言（中文简体、英文等）
3. **灵敏度**：调节语音识别的敏感程度（0-100%）
4. **连续识别**：是否启用连续语音识别
5. **自动发送**：识别完成后是否自动发送消息
6. **噪音降噪**：是否启用噪音过滤

### 语音播放设置
1. **启用语音播放**：开启/关闭语音合成功能
2. **自动播放回复**：助手回复后是否自动播放语音
3. **播放速度**：调节语音播放速度（0.5x - 2.0x）
4. **播放音量**：调节语音播放音量（0-100%）
5. **使用TTS引擎**：选择使用ByteDance TTS或Web Speech API
6. **新输入时中断播放**：新语音输入时是否中断当前播放

### 对话模式设置
1. **连续语音对话**：启用后可进行连续的语音对话
2. **会话超时**：对话会话的超时时间设置

## 使用方法

### 基础语音输入
1. 点击聊天界面中的🎤按钮
2. 开始说话，界面会显示"正在监听..."
3. 说完后停顿，系统会自动识别并转换为文字
4. 确认文字内容后点击发送

### 连续对话模式
1. 在聊天界面中点击"开始对话"按钮
2. 系统会自动开始语音监听
3. 说出你的问题或指令
4. 助手回复完成后会自动开始下一轮监听
5. 点击"结束对话"或🔇按钮停止对话模式

### 语音播放控制
1. 当助手回复时，如果启用了自动播放，会自动开始语音播放
2. 播放过程中可以点击🔊按钮停止播放
3. 可以在设置中调节播放速度和音量

## 界面指示器

### 语音状态指示
- **🎤 正在监听...**：系统正在进行语音识别
- **🔊 正在播放...**：系统正在播放语音
- **💬 对话模式**：当前处于连续对话模式

### 按钮状态
- **🎤 红色**：正在录音
- **🎤 灰色**：未录音状态
- **🔊 绿色**：正在播放
- **⏹️ 停止按钮**：停止所有语音活动

## 技术特性

### 语音识别
- 基于Web Speech API
- 支持实时转录和最终结果
- 多语言支持
- 错误处理和重试机制

### 语音合成
- 优先使用ByteDance TTS（需要配置API）
- 回退到Web Speech API
- 支持多种语音类型和参数调节
- 缓存机制优化性能

### 对话管理
- 智能会话状态管理
- 自动超时处理
- 错误恢复机制
- 与现有聊天系统无缝集成

## 故障排除

### 常见问题
1. **无法识别语音**
   - 检查麦克风权限
   - 确认浏览器支持语音识别
   - 调整灵敏度设置

2. **语音播放失败**
   - 检查TTS配置是否正确
   - 确认音量设置
   - 尝试切换到Web Speech API

3. **对话模式异常**
   - 重新启动对话模式
   - 检查网络连接
   - 清除浏览器缓存

### 浏览器兼容性
- Chrome 25+ (推荐Chrome 80+)
- Edge 79+
- Safari 14.1+
- Firefox 暂不支持

## 隐私说明

- 语音数据仅在本地处理，不会上传到服务器
- TTS功能需要调用ByteDance API（可选）
- 所有对话记录存储在本地浏览器中
- 用户可随时清除聊天记录

## 更新日志

### v1.2.0
- ✨ 新增完整语音对话功能
- 🎤 支持多语言语音识别
- 🔊 集成ByteDance TTS语音合成
- 💬 连续对话模式
- ⚙️ 丰富的语音设置选项
- 🎯 智能语音状态管理
- 🔧 错误处理和恢复机制

---

享受全新的语音对话体验！如有问题请查看故障排除部分或联系开发者。
